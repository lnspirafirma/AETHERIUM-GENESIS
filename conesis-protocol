use serde::{Deserialize, Serialize};

/// [Firma Spec] PetStatus
/// The lifecycle state of a biological entity within the store.
/// Mapped from components/schemas/PetStatus
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "lowercase")] 
pub enum PetStatus {
    /// Pet is available for adoption
    Available,
    /// Awaiting adoption
    Pending,
    /// No longer available
    Sold,
}

/// [Firma Spec] Pet
/// Represents the entity vector within the store system.
/// Mapped from components/schemas/Pet
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct Pet {
    /// Unique identifier for the entity.
    /// [GEP Enforced] Use i64 instead of u64 to prevent wrap-around logic errors.
    pub id: i64,

    /// The designation/name of the entity.
    pub name: String,

    /// Optional categorization tag (e.g., "dog").
    #[serde(skip_serializing_if = "Option::is_none")]
    pub tag: Option<String>,

    /// Current existence status.
    #[serde(skip_serializing_if = "Option::is_none")]
    pub status: Option<PetStatus>,
}

/// [Firma Spec] Order
/// Represents a transaction intent vector.
/// Mapped from components/schemas/Order
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")] // Enforces JSON compliance (petId, shipDate)
pub struct Order {
    /// Order ID (Signed Integer enforced)
    pub id: Option<i64>,

    /// Reference to the Pet ID
    pub pet_id: Option<i64>,

    /// Quantity of entities
    /// [GEP Enforced] i32 used instead of u32
    pub quantity: Option<i32>,

    /// ISO 8601 Timestamp string
    pub ship_date: Option<String>,

    /// Transaction completion flag
    pub complete: Option<bool>,
}

/// [Firma Spec] API Response Envelope
/// Standard wrapper for list responses (e.g. GET /pets)
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PetsResponse {
    pub data: Vec<Pet>,
    pub meta: ResponseMeta,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ResponseMeta {
    pub total: i32,
    pub page: i32,
}
